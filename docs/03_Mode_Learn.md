# 🎓 03_Mode_Learn.md (学习模式)

**定位：** 深度习得 (Acquisition)
**核心隐喻：** X光透视镜 (X-Ray Specs)
**主题色：** Royal Blue (`#2980B9`)
**最后更新：** 2026-02-06

---

## 1. 核心理念 (Philosophy)

**"Desirable Difficulty" (必要的困难)**
Learn 模式不仅是展示知识，更是引导思考。我们利用 **句子X光 (Sentence X-Ray)** 和 **教练问答 (Coach Q&A)**，让用户经历"观察-思考-验证"的过程。

---

## 2. 界面布局 (Layout)

```
┌──────────────────────────────────────────────────────────────────┐
│                        Floating Controls                          │
│                    [Flow] [Learn]  [Lv1] [Lv2] [Lv3]              │
├────────────────────────────────┬─────────────────────────────────┤
│                                │                                  │
│       Reader Panel (60%)       │       Copilot Panel (40%)        │
│                                │                                  │
│   ┌────────────────────────┐   │   ┌──────────────────────────┐   │
│   │ Magnetic Marker        │   │   │ 🔍 句子X光               │   │
│   │   ┌────────────────┐   │   │   │   结构类型: ...          │   │
│   │   │ Paragraph Text │   │   │   │   句子拆解: ...          │   │
│   │   │ with keywords  │   │   │   │   关键连接: ...          │   │
│   │   │ highlighted    │   │   │   └──────────────────────────┘   │
│   │   └────────────────┘   │   │                                  │
│   └────────────────────────┘   │   ┌──────────────────────────┐   │
│                                │   │ 📚 生词脚手架             │   │
│                                │   │   [word] /ipa/ - 释义     │   │
│                                │   │   [word] /ipa/ - 释义     │   │
│                                │   └──────────────────────────┘   │
│                                │                                  │
│                                │   ┌──────────────────────────┐   │
│                                │   │ 🎓 AI 教练 (问答)         │   │
│                                │   │   [💬 开始问答]           │   │
│                                │   └──────────────────────────┘   │
│                                │                                  │
└────────────────────────────────┴─────────────────────────────────┘
```

---

## 3. 左侧阅读区：Reader Panel

### 3.1 生词交互矩阵

| 等级 | Hover 行为 | 视觉样式 | 实现状态 |
| :--- | :--- | :--- | :--- |
| **Lv 1: Support** | 内联中文标签 | 词后显示灰色释义文字 | ✅ 已实现 |
| **Lv 2: Scaffold** | Tooltip 显示中文释义 | 蓝色底色高亮 | ✅ 已实现 |
| **Lv 3: Challenge** | 无 Tooltip (仅高亮) | 蓝色底色高亮 | ✅ 已实现 |

### 3.2 段落交互

- **主动点击**: 点击段落可将其设为活跃状态，同步更新右侧面板。
- **Focus Marker**: 金色磁吸条自动追踪当前活跃/阅读段落。
- **Ask AI (✨)**: 点击段落右侧火花图标，打开 AI 对话气泡。
- **翻译切换 (译)**: 点击显示/隐藏段落翻译。
- **进度追踪**: 自动记录当前阅读位置，跨端同步。

---

## 4. 右侧仪表盘：Copilot Panel

### 4.1 句子X光 (Sentence X-Ray)

**位置：** Copilot Panel 顶部
**触发时机：** 随段落分析自动生成
**设计目的：** 帮助用户理解复杂句子的语法结构

#### 数据结构 (Actual Schema)

```javascript
{
  xray: {
    pattern: "so...that 结果状语从句",
    breakdown: "Mr. Bennet was so odd a mixture of quick parts...",
    keyWords: [
      { word: "so", role: "程度副词" },
      { word: "that", role: "连词" }
    ],
    explanation: "如此...以至于... —— 表示因果程度"
  }
}
```

#### 按等级显示逻辑

| 等级 | 显示内容 |
| :--- | :--- |
| **Lv 1/2** | **全量显示**：结构类型 + 句子拆解 + 关键连接 + 解析说明 |
| **Lv 3** | **核心显示**：结构类型 + 句子拆解 + 关键连接 (**隐藏解析说明**) |

**实现状态：** ✅ 已实现 (v2.1)

---

### 4.2 生词脚手架 (Knowledge Scaffolding)

**位置：** Copilot Panel 中部
**功能：** 显示当前段落的核心生词卡片

#### 苏格拉底循环 (Socratic Loop)

| 状态 | 显示内容 | Lv1 | Lv2 | Lv3 |
| :--- | :--- | :--- | :--- | :--- |
| **Guess** | 单词 + 线索 | 中文提示 | 英文提示 | 无提示 |
| **Reveal** | 完整释义 | 直接显示 | 直接显示 | 点击揭示 |

**实现状态：** ✅ 已实现

---

### 4.3 AI 教练问答 (Coach Q&A)

**位置：** Copilot Panel 底部
**设计目的：** 用选择题引导用户主动思考，实现苏格拉底式学习

**实现状态：** 🟡 设计完成，待开发

---

## 5. 实现清单

| 功能 | 优先级 | 状态 |
| :--- | :--- | :--- |
| 生词高亮 (3 级) | P0 | ✅ 已实现 |
| 生词卡片 (苏格拉底循环) | P0 | ✅ 已实现 |
| 段落翻译 | P0 | ✅ 已实现 |
| Ask AI 对话 | P1 | ✅ 已实现 |
| 阅读进度同步 | P1 | ✅ 已实现 |
| 句子X光 | P1 | ✅ 已实现 |
| AI 教练问答 | P2 | 🟡 待开发 |