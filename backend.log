INFO:     Will watch for changes in these directories: ['/Users/chenhanzhen/Project/AI-Reading-Co-pilot/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [12089] using StatReload
Spacy model en_core_web_sm not found, fallback to sentencizer.
2026-02-07 16:04:37,199 - app.main - INFO - PDF segmentation runtime: engine=pdfplumber default_strategy=indent_margin
INFO:     Started server process [12092]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
✅ Database initialized successfully: reading_copilot_v3.db
✅ Spacy Sentencizer loaded.
INFO:     127.0.0.1:58019 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:58035 - "OPTIONS /auth/login HTTP/1.1" 200 OK
2026-02-07 16:04:55,528 - app.routers.auth - INFO - Login attempt for email: chanlk9527@gmail.com
INFO:     127.0.0.1:58035 - "POST /auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:58035 - "OPTIONS /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58037 - "OPTIONS /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58039 - "OPTIONS /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58035 - "GET /auth/me HTTP/1.1" 200 OK
2026-02-07 16:04:55,556 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:58037 - "GET /texts HTTP/1.1" 200 OK
2026-02-07 16:04:55,570 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:58035 - "GET /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58035 - "OPTIONS /texts/20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58035 - "DELETE /texts/20 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:58231 - "OPTIONS /pdf/upload HTTP/1.1" 200 OK
2026-02-07 16:05:24,422 - app.routers.pdf - INFO - PDF upload by user 1: hpo(1).pdf
2026-02-07 16:05:51,462 - app.services.pdf_segmenter - INFO - [PDFSegmenter] paragraphs=3397 engine=pdfplumber
INFO:     127.0.0.1:58231 - "POST /pdf/upload HTTP/1.1" 200 OK
INFO:     127.0.0.1:58231 - "OPTIONS /texts HTTP/1.1" 200 OK
2026-02-07 16:05:51,495 - app.routers.texts - INFO - User 1 creating text: hpo(1)
INFO:     127.0.0.1:58231 - "POST /texts HTTP/1.1" 201 Created
2026-02-07 16:05:52,313 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:58231 - "GET /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:58231 - "OPTIONS /texts/21 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58388 - "OPTIONS /texts/21 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58231 - "GET /texts/21 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58388 - "GET /texts/21 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58231 - "OPTIONS /texts/21/sentences HTTP/1.1" 200 OK
2026-02-07 16:05:56,089 - app.routers.sentences - INFO - Fetching sentences for text 21
INFO:     127.0.0.1:58231 - "GET /texts/21/sentences HTTP/1.1" 200 OK
2026-02-07 16:05:56,222 - app.routers.sentences - INFO - Fetching sentences for text 21
INFO:     127.0.0.1:58388 - "GET /texts/21/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:58437 - "OPTIONS /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58437 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58467 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58467 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58510 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58754 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58824 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58824 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58965 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58965 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58965 - "GET /texts/21 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58967 - "GET /texts/21 HTTP/1.1" 200 OK
2026-02-07 16:07:50,999 - app.routers.sentences - INFO - Fetching sentences for text 21
INFO:     127.0.0.1:58965 - "GET /texts/21/sentences HTTP/1.1" 200 OK
2026-02-07 16:07:51,315 - app.routers.sentences - INFO - Fetching sentences for text 21
INFO:     127.0.0.1:58967 - "GET /texts/21/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:59078 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:60266 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:60266 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:60266 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:60266 - "PATCH /texts/21/progress HTTP/1.1" 200 OK
2026-02-07 17:59:16,445 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:60266 - "GET /texts HTTP/1.1" 200 OK
2026-02-07 17:59:16,458 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:60617 - "GET /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:60617 - "DELETE /texts/21 HTTP/1.1" 204 No Content
2026-02-07 17:59:30,909 - app.routers.pdf - INFO - PDF upload by user 1: hpo(1).pdf
2026-02-07 17:59:59,276 - app.services.pdf_segmenter - INFO - [PDFSegmenter] paragraphs=3387 engine=pdfplumber
INFO:     127.0.0.1:60724 - "POST /pdf/upload HTTP/1.1" 200 OK
2026-02-07 17:59:59,324 - app.routers.texts - INFO - User 1 creating text: hpo(1)
INFO:     127.0.0.1:60724 - "POST /texts HTTP/1.1" 201 Created
2026-02-07 17:59:59,771 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:60724 - "GET /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:61889 - "OPTIONS /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61890 - "OPTIONS /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61889 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61890 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61889 - "OPTIONS /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:02:53,571 - app.routers.sentences - INFO - Fetching sentences for text 22
INFO:     127.0.0.1:61889 - "GET /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:02:53,682 - app.routers.sentences - INFO - Fetching sentences for text 22
INFO:     127.0.0.1:61890 - "GET /texts/22/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:62085 - "OPTIONS /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:62085 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:62085 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:62087 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:62262 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:62262 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:62262 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62264 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:03:41,938 - app.routers.sentences - INFO - Fetching sentences for text 22
INFO:     127.0.0.1:62262 - "GET /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:03:42,067 - app.routers.sentences - INFO - Fetching sentences for text 22
INFO:     127.0.0.1:62264 - "GET /texts/22/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:62363 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63224 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63268 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63403 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63403 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63403 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:63566 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'app/routers/sentences.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12092]
Spacy model en_core_web_sm not found, fallback to sentencizer.
2026-02-07 18:09:50,480 - app.main - INFO - PDF segmentation runtime: engine=pdfplumber default_strategy=indent_margin
INFO:     Started server process [13424]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
✅ Database initialized successfully: reading_copilot_v3.db
✅ Spacy Sentencizer loaded.
INFO:     127.0.0.1:50143 - "OPTIONS /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:50145 - "OPTIONS /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:50143 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:50143 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:50143 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50145 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:10:04,743 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50145 - "GET /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:10:05,029 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50143 - "GET /texts/22/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:50143 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:50498 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50500 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:10:39,290 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50500 - "GET /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:10:39,538 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50498 - "GET /texts/22/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:50498 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:50655 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50657 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:10:50,700 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50657 - "GET /texts/22/sentences HTTP/1.1" 200 OK
2026-02-07 18:10:50,933 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:50655 - "GET /texts/22/sentences HTTP/1.1" 200 OK
INFO:     127.0.0.1:50655 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:50869 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50869 - "OPTIONS /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
2026-02-07 18:11:10,319 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=139281)
INFO:     127.0.0.1:50869 - "GET /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50869 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:50996 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51002 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:11:22,892 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=139281)
INFO:     127.0.0.1:51002 - "GET /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51002 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:51140 - "GET /texts/22 HTTP/1.1" 200 OK
2026-02-07 18:11:30,677 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=139281)
INFO:     127.0.0.1:51140 - "GET /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51140 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13424]
Spacy model en_core_web_sm not found, fallback to sentencizer.
2026-02-07 18:13:50,771 - app.main - INFO - PDF segmentation runtime: engine=pdfplumber default_strategy=indent_margin
INFO:     Started server process [14403]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
✅ Database initialized successfully: reading_copilot_v3.db
✅ Spacy Sentencizer loaded.
INFO:     127.0.0.1:58390 - "OPTIONS /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "OPTIONS /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58390 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58390 - "GET /auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:58390 - "OPTIONS /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "OPTIONS /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58390 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "GET /texts/22 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "OPTIONS /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
2026-02-07 18:23:10,855 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=None paragraph_page_size=20 around_sentence_id=139281)
INFO:     127.0.0.1:58392 - "GET /texts/22/sentences?paragraph_page_size=20&around_sentence_id=139281 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "OPTIONS /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:58392 - "PATCH /texts/22/progress HTTP/1.1" 200 OK
INFO:     127.0.0.1:59814 - "OPTIONS /texts/22/sentences?paragraph_page=138&paragraph_page_size=20 HTTP/1.1" 200 OK
2026-02-07 19:32:20,951 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=138 paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:59814 - "GET /texts/22/sentences?paragraph_page=138&paragraph_page_size=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59814 - "OPTIONS /texts/22/sentences?paragraph_page=137&paragraph_page_size=20 HTTP/1.1" 200 OK
2026-02-07 19:32:21,883 - app.routers.sentences - INFO - Fetching sentences for text 22 (paragraph_page=137 paragraph_page_size=20 around_sentence_id=None)
INFO:     127.0.0.1:59814 - "GET /texts/22/sentences?paragraph_page=137&paragraph_page_size=20 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59814 - "OPTIONS /texts HTTP/1.1" 200 OK
INFO:     127.0.0.1:59840 - "OPTIONS /texts HTTP/1.1" 200 OK
2026-02-07 19:32:23,228 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:59814 - "GET /texts HTTP/1.1" 200 OK
2026-02-07 19:32:23,244 - app.routers.texts - INFO - Listing texts for User 1
INFO:     127.0.0.1:59840 - "GET /texts HTTP/1.1" 200 OK
